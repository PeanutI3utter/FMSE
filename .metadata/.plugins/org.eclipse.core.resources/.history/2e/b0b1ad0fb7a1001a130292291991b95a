int cross[5];
int carsoncross = 0;

proctype car(int start, int finish){
	int id = _pid % 4;
	int step = finish - start / 2;
	do
	:: atomic{cross[4] == 0 && cross[(id - 1) % 4]; cross = _pid; carsoncross = carsoncross + 1; cross[start] = 0}
	:: atomic{cross == _pid; cross = 0; carsoncross = carsoncross - 1; pos = pos + step; break};
	od  
}

proctype watchdog(){
	assert(carsoncross <= 1);
}

init{
	atomic{
}