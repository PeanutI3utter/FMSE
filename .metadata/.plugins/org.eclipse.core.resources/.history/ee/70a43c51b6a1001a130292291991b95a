mtype = {n, w, c, e, s};


int cross[5] = {n, w, 0, e ,s};
int carsoncross = 0;

proctype car(mtype start; mtype finish){
	mtype pos = start;
	int step = finish - start / 2;
	do
	:: atomic{cross == 0; cross = _pid; carsoncross = carsoncross + 1; pos = pos + step;}
	:: atomic{cross == _pid; cross = 0; carsoncross = carsoncross - 1; pos = pos + step; break};
	od  
}

proctype watchdog(){
	assert(carsoncross <= 1);
}

init{
	atomic{
}