int isPrinting;

chan printingChan = [0] of { int };

active [2] proctype computer()
{
	atomic
	{
		isPrinting < 1;
		isPrinting++;
	}
	isPrinting--;
}

active proctype printer()
{
	int rcv;
	
	endStatePrinter:
	do
	:: printingChan ? rcv; isPrinting++; assert(isPrinting <2); printf("%d\n", rcv);
		isPrinting--;
	od
}

active proctype watchdog()
{
	assert(isPrinting <= 1);
}
	